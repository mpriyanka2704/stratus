!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","underscore","angular"],factory):factory(root.Stratus,root._,root.angular)}(this,function(Stratus,_,angular){Stratus.Controllers.FilterStreamsByTag=["$scope","$element","$mdToast","$log","$http","$parse",function($scope,$element,$mdToast,$log,$http,$parse){Stratus.Instances[_.uniqueId("filter_streams_by_tag_")]=$scope,$scope.Stratus=Stratus,$scope._=_,$scope.contents=[],$scope.filterTags=[],$scope.filterTagIds=[],$scope.showOnly=[],$scope.meta=[],$scope.separateSections=!1,$scope.more=!1,$scope.$watch("collection.models",function(models){models&&models.length>0&&($scope.contents=$scope.data.contents=models)}),$scope.$watch("collection.meta.attributes.separateSections",function(separateSections){$scope.separateSections=separateSections}),$scope.$watch("collection.meta.attributes.filterTags",function(filterTag){filterTag&&filterTag.length>0&&($scope.filterTags=filterTag)}),$scope.$watch("collection.meta",function(meta){meta&&($scope.meta=meta)}),$scope.toggle=function(filterTag){var index=$scope.showOnly.findIndex(function(x){return x.id===filterTag.id});console.log($scope.showOnly),-1!==index?$scope.showOnly.splice(index,1):$scope.showOnly.push(filterTag),-1!==index?$scope.filterTagIds.splice(index,1):$scope.filterTagIds.push(filterTag.id),$scope.separateSections||($scope.meta.set("api.options.tagIds",$scope.showOnly.map(function(item){return item.id})),$scope.collection.fetch().then(function(response){console.log("response",response)}))},$scope.moreFilter=function(){$scope.more=!$scope.more}}]});